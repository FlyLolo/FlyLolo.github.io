(window.webpackJsonp=window.webpackJsonp||[]).push([[67],{313:function(t,s,a){"use strict";function r(t,s,a,r,e,n,o,p){var _,v="function"==typeof t?t.options:t;if(s&&(v.render=s,v.staticRenderFns=a,v._compiled=!0),r&&(v.functional=!0),n&&(v._scopeId="data-v-"+n),o?(_=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),e&&e.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(o)},v._ssrRegister=_):e&&(_=p?function(){e.call(this,(v.functional?this.parent:this).$root.$options.shadowRoot)}:e),_)if(v.functional){v._injectStyles=_;var c=v.render;v.render=function(t,s){return _.call(s),c(t,s)}}else{var l=v.beforeCreate;v.beforeCreate=l?[].concat(l,_):[_]}return{exports:t,options:v}}a.d(s,"a",(function(){return r}))},432:function(t,s,a){"use strict";a.r(s);var r=a(313),e=Object(r.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"四-layout与-viewstart"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#四-layout与-viewstart"}},[t._v("#")]),t._v(" 四. _Layout与_ViewStart")]),t._v(" "),a("hr"),t._v(" "),a("p",[t._v("本章我们新建一个项目,并通过这个项目熟悉一下_Layout与_ViewStart以及它们的加载顺序.")]),t._v(" "),a("h2",{attrs:{id:"_1-新建一个项目"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-新建一个项目"}},[t._v("#")]),t._v(" 1. 新建一个项目")]),t._v(" "),a("p",[t._v("首先, 文件->新建一个解决方案")]),t._v(" "),a("p",[a("img",{attrs:{src:"/blogimages/ASPNETCore2_4/548134-20180217213100544-1212981877.png",alt:""}})]),t._v(" "),a("p",[t._v("选择.Net Core 的APP下面的ASP.NET Core Web App(MVC)")]),t._v(" "),a("p",[t._v("Next")]),t._v(" "),a("p",[a("img",{attrs:{src:"/blogimages/ASPNETCore2_4/548134-20180218090605733-389996591.jpg",alt:""}})]),t._v(" "),a("p",[t._v("设置解决方案的名称(和Xcode的界面风格有点像), 输入FL.WeightManager, 做一个每天记录体重的应用")]),t._v(" "),a("p",[t._v("点击Create.")]),t._v(" "),a("p",[t._v("项目新建完毕, 项目的文件结构上一章已经说过了.")]),t._v(" "),a("h2",{attrs:{id:"_2-layout的应用"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-layout的应用"}},[t._v("#")]),t._v(" 2. _layout的应用")]),t._v(" "),a("p",[t._v("新建好的项目默认运行效果如下图")]),t._v(" "),a("p",[a("img",{attrs:{src:"/blogimages/ASPNETCore2_4/548134-20180218092051640-1762210003.png",alt:""}})]),t._v(" "),a("p",[t._v("页面主要分三部分, 上面的header, 下面的footer, 点击上面菜单总的Home、About和Contact切换一下页面看一下")]),t._v(" "),a("p",[t._v("这两部分都是不变的, 只有中间部分在变.")]),t._v(" "),a("p",[t._v("打开Shared文件夹下面的_layout.cshtml页面看一下, header和footer都是定义在这里的,")]),t._v(" "),a("p",[t._v("而中间变的部分是"),a("code",[t._v("@RenderBody()")]),t._v(".也就是我们经常要改变的地方了.")]),t._v(" "),a("p",[t._v("现在将主页改变一下, 打开Home文件夹下的Index文件,将里面的一大堆代码改成如下代码")]),t._v(" "),a("div",{staticClass:"language-csharp extra-class"},[a("pre",{pre:!0,attrs:{class:"language-csharp"}},[a("code",[a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(" @"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v("     ViewData"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Title"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"主页"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("4")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("table "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"table table-hover"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("5")]),t._v("     "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("thead"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("6")]),t._v("         "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("tr"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("7")]),t._v("             "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("th"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("序号"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("th"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("8")]),t._v("             "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("th"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("日期"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("th"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("9")]),t._v("             "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("th"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("体重"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("th"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),t._v("             "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("th"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("备注"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("th"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("11")]),t._v("         "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("tr"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("12")]),t._v("     "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("thead"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("13")]),t._v("     "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("tbody"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("14")]),t._v("         "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("tr"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("15")]),t._v("             "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("td"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("td"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("16")]),t._v("             "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("td"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2018")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("02")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("15")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("td"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("17")]),t._v("             "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("td"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("66.6")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("td"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("18")]),t._v("             "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("td"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("除夕"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("胖了"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("td"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("19")]),t._v("         "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("tr"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("20")]),t._v("         "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("tr"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("21")]),t._v("             "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("td"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("td"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("22")]),t._v("             "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("td"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2018")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("02")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("16")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("td"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("23")]),t._v("             "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("td"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("68.8")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("td"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("24")]),t._v("             "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("td"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("春节"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("又重了"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("td"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("25")]),t._v("         "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("tr"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("26")]),t._v("     "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("tbody"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("27")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("table"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n")])])]),a("p",[t._v("刷新一下页面")]),t._v(" "),a("p",[a("img",{attrs:{src:"/blogimages/ASPNETCore2_4/548134-20180217224433236-1995262637.png",alt:""}})]),t._v(" "),a("p",[t._v("看起来效果还不错, 可能会注意到, 这个table有个class  "),a("code",[t._v('<table <span style="color: #0000ff;">class')]),t._v("="),a("span",{staticStyle:{color:"#800000"}},[t._v('"')]),a("span",{staticStyle:{color:"#800000"}},[t._v("table table-hover")]),a("span",{staticStyle:{color:"#800000"}},[t._v('"')]),t._v(">"),t._v(" ,")]),t._v(" "),a("p",[t._v("这个class定义在哪里呢.")]),t._v(" "),a("p",[t._v("再次打开_layout文件, 可以看到里面在Development环境下引用了bootstrap的css")]),t._v(" "),a("div",{staticClass:"language-csharp extra-class"},[a("pre",{pre:!0,attrs:{class:"language-csharp"}},[a("code",[a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("environment")]),t._v(" include"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Development"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("link")]),t._v(" rel"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"stylesheet"')]),t._v(" href"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"~/lib/bootstrap/dist/css/bootstrap.css"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("link")]),t._v(" rel"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"stylesheet"')]),t._v(" href"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"~/css/site.css"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("environment"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n")])])]),a("p",[t._v('所以可以把一些"通用"的css和js的引用放在layout文件里, 避免重复写这些引用.')]),t._v(" "),a("p",[t._v("顺便把header和footer中显示的项目名称改一下, 然后分别打开Index和About这些页面, Header和Footer都统一改变了.")]),t._v(" "),a("p",[t._v("如下图的About页面.")]),t._v(" "),a("p",[a("img",{attrs:{src:"/blogimages/ASPNETCore2_4/548134-20180217221525137-558510817.png",alt:""}})]),t._v(" "),a("p",[t._v("但是我们在这个Index页中没有对这个模板做引用, 是通过什么方式引用的呢?")]),t._v(" "),a("h2",{attrs:{id:"_3-viewstart的应用"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-viewstart的应用"}},[t._v("#")]),t._v(" 3. _ViewStart的应用")]),t._v(" "),a("p",[t._v("回顾修改后的Index页面, 我们并没有写 "),a("code",[t._v('Layout = <span style="color: #800000;">"')]),a("span",{staticStyle:{color:"#800000"}},[t._v("_Layout")]),a("span",{staticStyle:{color:"#800000"}},[t._v('"')]),t._v(" 这样的代码, 这是因为已经在_ViewStart中默认设置了")]),t._v(" "),a("p",[t._v("_ViewStart中只有这一句")]),t._v(" "),a("div",{staticClass:"language-csharp extra-class"},[a("pre",{pre:!0,attrs:{class:"language-csharp"}},[a("code",[t._v("@"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    Layout "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"_Layout"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[t._v("如果我们在Index页面中添加一句 "),a("code",[t._v('Layout=<span style="color: #0000ff;">null')]),t._v(" 如下,")]),t._v(" "),a("div",{staticClass:"language-csharp extra-class"},[a("pre",{pre:!0,attrs:{class:"language-csharp"}},[a("code",[t._v("@"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    Layout"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    ViewData"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Title"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"主页"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[t._v("再次刷新页面, 样子变成了这样")]),t._v(" "),a("p",[a("img",{attrs:{src:"/blogimages/ASPNETCore2_4/548134-20180217224206353-1532728059.png",alt:""}})]),t._v(" "),a("p",[t._v("Header和Footer以及Table的样式全都没有了, 是因为这些本来都写在_Layout中, 现在失去了对_Layout的引用, 这些也就消失了.")]),t._v(" "),a("p",[a("strong",[t._v("总结:")]),t._v(" _ViewStart对模板页做了默认的设置, 除非显示的写明Layout=XXX, 否则会采用_ViewStart中的设置.")]),t._v(" "),a("p",[t._v("所以未做设置和设置 "),a("code",[t._v('Layout = <span style="color: #800000;">"')]),a("span",{staticStyle:{color:"#800000"}},[t._v("_Layout")]),a("span",{staticStyle:{color:"#800000"}},[t._v('"')]),t._v(" 的效果是一样的.")]),t._v(" "),a("h2",{attrs:{id:"_4-viewstart、-layout和index-实际页面-的加载顺序"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-viewstart、-layout和index-实际页面-的加载顺序"}},[t._v("#")]),t._v(" 4. _ViewStart、_Layout和Index(实际页面)的加载顺序")]),t._v(" "),a("p",[t._v("加载顺序是: _ViewStart =>Index=>_Layout.")]),t._v(" "),a("p",[t._v("1._ViewStart在所有View加载之前加载, 设置了默认的模板页.")]),t._v(" "),a("p",[t._v("2.接着由Controller指定的页面查找Index.cshtml加载, 并读取该页面的Layout设置.")]),t._v(" "),a("p",[t._v("3.根据Index页面的Layout设置的模板页查找对应的模板页加载.")]),t._v(" "),a("p",[t._v("将_ViewStart中的 "),a("code",[t._v('Layout = <span style="color: #800000;">"')]),a("span",{staticStyle:{color:"#800000"}},[t._v("_Layout")]),a("span",{staticStyle:{color:"#800000"}},[t._v('"')]),t._v(" 改为 "),a("code",[t._v('Layout = <span style="color: #800000;">"')]),a("span",{staticStyle:{color:"#800000"}},[t._v("_Layout1")]),a("span",{staticStyle:{color:"#800000"}},[t._v('"')]),t._v(" , 再次运行, 页面会出现如下找不到模板的错误.")]),t._v(" "),a("div",{staticClass:"language-csharp extra-class"},[a("pre",{pre:!0,attrs:{class:"language-csharp"}},[a("code",[t._v("An unhandled exception occurred "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("while")]),t._v(" processing the request"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("\n\nInvalidOperationException"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" The layout view '_Layout1' could "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("not")]),t._v(" be located"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v(" The following locations "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("were")]),t._v(" searched"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("Views"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("Home"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("_Layout1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("cshtml\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("Views"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("Shared"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),a("span",{pre:!0,attrs:{class:"token return-type class-name"}},[t._v("_Layout1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("cshtml")]),t._v("\nMicrosoft"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("AspNetCore"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Mvc"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Razor"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("RazorView"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("GetLayoutPage")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ViewContext")]),t._v(" context"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("string")])]),t._v(" executingFilePath"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("string")])]),t._v(" layoutPath"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),a("p",[a("strong",[t._v("View的查找规则:")]),t._v(" 先查找Controller对应的文件夹(这里是Home), 若未找到则到Shared文件夹查找, 若最终未找到则提示错误.")])])}),[],!1,null,null,null);s.default=e.exports}}]);