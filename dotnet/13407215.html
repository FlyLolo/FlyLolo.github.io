<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>FlyLolo 闲聊编程</title>
    <meta name="generator" content="VuePress 1.8.2">
    
    <meta name="description" content="没事敲敲代码">
    
    <link rel="preload" href="/assets/css/0.styles.b23bcaa9.css" as="style"><link rel="preload" href="/assets/js/app.5c4124d9.js" as="script"><link rel="preload" href="/assets/js/2.5052fd89.js" as="script"><link rel="preload" href="/assets/js/18.1c3b6824.js" as="script"><link rel="prefetch" href="/assets/js/10.ebd354ff.js"><link rel="prefetch" href="/assets/js/11.c0ba7b39.js"><link rel="prefetch" href="/assets/js/12.d2df4345.js"><link rel="prefetch" href="/assets/js/13.ad189de6.js"><link rel="prefetch" href="/assets/js/14.211e1c27.js"><link rel="prefetch" href="/assets/js/15.bc9f8b57.js"><link rel="prefetch" href="/assets/js/16.5cc9b653.js"><link rel="prefetch" href="/assets/js/17.4281fea3.js"><link rel="prefetch" href="/assets/js/19.19526aaa.js"><link rel="prefetch" href="/assets/js/20.55520ac3.js"><link rel="prefetch" href="/assets/js/21.68aa2210.js"><link rel="prefetch" href="/assets/js/22.976b6f6a.js"><link rel="prefetch" href="/assets/js/23.9241ad9a.js"><link rel="prefetch" href="/assets/js/24.87e81add.js"><link rel="prefetch" href="/assets/js/25.5a324370.js"><link rel="prefetch" href="/assets/js/26.6e0c7b3a.js"><link rel="prefetch" href="/assets/js/27.c2db3589.js"><link rel="prefetch" href="/assets/js/28.f504554f.js"><link rel="prefetch" href="/assets/js/29.0b8cbb3f.js"><link rel="prefetch" href="/assets/js/3.dc0bd479.js"><link rel="prefetch" href="/assets/js/30.18cf6f70.js"><link rel="prefetch" href="/assets/js/31.90a5f0a4.js"><link rel="prefetch" href="/assets/js/32.454348da.js"><link rel="prefetch" href="/assets/js/33.1c21d0c1.js"><link rel="prefetch" href="/assets/js/34.a2fc1109.js"><link rel="prefetch" href="/assets/js/35.7123c8b5.js"><link rel="prefetch" href="/assets/js/36.6a74523e.js"><link rel="prefetch" href="/assets/js/37.4a0d5e49.js"><link rel="prefetch" href="/assets/js/38.870830b5.js"><link rel="prefetch" href="/assets/js/39.7a99876d.js"><link rel="prefetch" href="/assets/js/4.2543b7ad.js"><link rel="prefetch" href="/assets/js/40.1ab956e2.js"><link rel="prefetch" href="/assets/js/41.e2cd491a.js"><link rel="prefetch" href="/assets/js/42.8118b296.js"><link rel="prefetch" href="/assets/js/43.3b58128f.js"><link rel="prefetch" href="/assets/js/44.1648ce27.js"><link rel="prefetch" href="/assets/js/45.0e2feba0.js"><link rel="prefetch" href="/assets/js/46.8cacc6f0.js"><link rel="prefetch" href="/assets/js/47.85a42084.js"><link rel="prefetch" href="/assets/js/48.887f0baf.js"><link rel="prefetch" href="/assets/js/49.311ea494.js"><link rel="prefetch" href="/assets/js/5.82bf0454.js"><link rel="prefetch" href="/assets/js/50.1a3416b2.js"><link rel="prefetch" href="/assets/js/51.17ac5138.js"><link rel="prefetch" href="/assets/js/52.0e0119e0.js"><link rel="prefetch" href="/assets/js/53.a74775a2.js"><link rel="prefetch" href="/assets/js/54.4dc1f4cf.js"><link rel="prefetch" href="/assets/js/55.782ceae6.js"><link rel="prefetch" href="/assets/js/56.d371faac.js"><link rel="prefetch" href="/assets/js/57.42acf1f9.js"><link rel="prefetch" href="/assets/js/58.508c5ac0.js"><link rel="prefetch" href="/assets/js/59.a747c5df.js"><link rel="prefetch" href="/assets/js/6.d83b86ff.js"><link rel="prefetch" href="/assets/js/60.1a0f169d.js"><link rel="prefetch" href="/assets/js/61.eb35190d.js"><link rel="prefetch" href="/assets/js/62.508f7c4c.js"><link rel="prefetch" href="/assets/js/63.4c9bbdbe.js"><link rel="prefetch" href="/assets/js/64.5f784752.js"><link rel="prefetch" href="/assets/js/65.83e85dd4.js"><link rel="prefetch" href="/assets/js/66.c3c68bbd.js"><link rel="prefetch" href="/assets/js/67.15ce6b9a.js"><link rel="prefetch" href="/assets/js/68.2f1ad103.js"><link rel="prefetch" href="/assets/js/69.e220c066.js"><link rel="prefetch" href="/assets/js/7.fbd6423b.js"><link rel="prefetch" href="/assets/js/70.024cc331.js"><link rel="prefetch" href="/assets/js/71.424df8a7.js"><link rel="prefetch" href="/assets/js/72.87abc657.js"><link rel="prefetch" href="/assets/js/73.ea6962e5.js"><link rel="prefetch" href="/assets/js/74.c50c111e.js"><link rel="prefetch" href="/assets/js/75.4d2a7dbe.js"><link rel="prefetch" href="/assets/js/76.49e30c54.js"><link rel="prefetch" href="/assets/js/77.5d8c8f6d.js"><link rel="prefetch" href="/assets/js/78.5b4f8e29.js"><link rel="prefetch" href="/assets/js/79.316dc7d8.js"><link rel="prefetch" href="/assets/js/8.a45bb22d.js"><link rel="prefetch" href="/assets/js/80.b1c365a1.js"><link rel="prefetch" href="/assets/js/81.cb25e543.js"><link rel="prefetch" href="/assets/js/82.7bc18643.js"><link rel="prefetch" href="/assets/js/83.6c0ee3d0.js"><link rel="prefetch" href="/assets/js/84.f8184dc3.js"><link rel="prefetch" href="/assets/js/85.b0a7f43e.js"><link rel="prefetch" href="/assets/js/86.af5fcb58.js"><link rel="prefetch" href="/assets/js/9.55a96ecc.js">
    <link rel="stylesheet" href="/assets/css/0.styles.b23bcaa9.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/assets/img/logo.png" alt="FlyLolo 闲聊编程" class="logo"> <span class="site-name can-hide">FlyLolo 闲聊编程</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">
  Home
</a></div><div class="nav-item"><a href="/dotnet/" class="nav-link router-link-active">
  .NET
</a></div><div class="nav-item"><a href="/guide/" class="nav-link">
  Java
</a></div><div class="nav-item"><a href="/db/" class="nav-link">
  DB
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Language Menu" class="dropdown-title"><span class="title">Languages</span> <span class="arrow down"></span></button> <button type="button" aria-label="Language Menu" class="mobile-dropdown-title"><span class="title">Languages</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/language/chinese/" class="nav-link">
  Chinese
</a></li><li class="dropdown-item"><!----> <a href="/language/japanese/" class="nav-link">
  Japanese
</a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">
  Home
</a></div><div class="nav-item"><a href="/dotnet/" class="nav-link router-link-active">
  .NET
</a></div><div class="nav-item"><a href="/guide/" class="nav-link">
  Java
</a></div><div class="nav-item"><a href="/db/" class="nav-link">
  DB
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Language Menu" class="dropdown-title"><span class="title">Languages</span> <span class="arrow down"></span></button> <button type="button" aria-label="Language Menu" class="mobile-dropdown-title"><span class="title">Languages</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/language/chinese/" class="nav-link">
  Chinese
</a></li><li class="dropdown-item"><!----> <a href="/language/japanese/" class="nav-link">
  Japanese
</a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>ASP.NET Core</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/dotnet/" aria-current="page" class="sidebar-link">新书上市</a></li><li><a href="/dotnet/ASPNETCore2_1.html" class="sidebar-link">一. 概述</a></li><li><a href="/dotnet/ASPNETCore2_2.html" class="sidebar-link">二. 开发环境</a></li><li><a href="/dotnet/ASPNETCore2_3.html" class="sidebar-link">三. 项目结构</a></li><li><a href="/dotnet/ASPNETCore2_4.html" class="sidebar-link">四. Layout与ViewStart</a></li><li><a href="/dotnet/ASPNETCore2_5.html" class="sidebar-link">五.服务的加载与运行</a></li><li><a href="/dotnet/ASPNETCore2_6.html" class="sidebar-link">六. 聊聊依赖注入</a></li><li><a href="/dotnet/ASPNETCore2_7.html" class="sidebar-link">七.启动背后的秘密</a></li><li><a href="/dotnet/ASPNETCore2_8.html" class="sidebar-link">八.图说管道</a></li><li><a href="/dotnet/ASPNETCore2_9.html" class="sidebar-link">九.发布到CentOS</a></li><li><a href="/dotnet/ASPNETCore2_10.html" class="sidebar-link">十.升级到2.1</a></li><li><a href="/dotnet/ASPNETCore2_11.html" class="sidebar-link">十一.运行后台任务</a></li><li><a href="/dotnet/ASPNETCore2_12.html" class="sidebar-link">十二.内置日志与Nlog</a></li><li><a href="/dotnet/ASPNETCore2_13.html" class="sidebar-link">十三.httpClient.GetAsync 报SSL错误</a></li><li><a href="/dotnet/ASPNETCore2_14.html" class="sidebar-link">十四.静态文件访问与授权</a></li><li><a href="/dotnet/ASPNETCore2_15.html" class="sidebar-link">十五.图解路由(2.1 or earler)</a></li><li><a href="/dotnet/ASPNETCore2_16.html" class="sidebar-link">十六.新的Endpoint路由方案</a></li><li><a href="/dotnet/ASPNETCore2_17.html" class="sidebar-link">十七.Action的执行</a></li><li><a href="/dotnet/ASPNETCore2_18.html" class="sidebar-link">十八.Filter的处理机制及执行顺序</a></li><li><a href="/dotnet/ASPNETCore2_19.html" class="sidebar-link">十九. Action参数的映射与模型绑定</a></li><li><a href="/dotnet/ASPNETCore2_20.html" class="sidebar-link">二十.Action的数据返回格式处理</a></li><li><a href="/dotnet/ASPNETCore2_21.html" class="sidebar-link">二十一. 内容协商与自定义返回格式</a></li><li><a href="/dotnet/ASPNETCore_22.html" class="sidebar-link">二十二. 多样性的配置方式</a></li><li><a href="/dotnet/ASPNETCore_23.html" class="sidebar-link">二十三. 配置的内部处理机制</a></li><li><a href="/dotnet/ASPNETCore_24.html" class="sidebar-link">二十四. Options模式的配置</a></li><li><a href="/dotnet/ASPNETCore_25.html" class="sidebar-link">二十五. TagHelper</a></li><li><a href="/dotnet/ASPNETCore2_26.html" class="sidebar-link">二十六. 应用JWT进行用户认证</a></li><li><a href="/dotnet/ASPNETCore2_27.html" class="sidebar-link">二十七. JWT与用户授权</a></li><li><a href="/dotnet/ASPNETCore_28.html" class="sidebar-link">二十八. 在Docker中部署</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>C# 其他</span> <!----></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><p>本文从一个最简单的项目开始，通过一个小例子了解一下ABP如何创建一个项目，并进一步学习ABP自动生成的各个模块的含义及使用方法。</p> <h2 id="_1-创建项目"><a href="#_1-创建项目" class="header-anchor">#</a> 1. 创建项目</h2> <h2 id="_1-安装cli"><a href="#_1-安装cli" class="header-anchor">#</a> 1. 安装cli</h2> <p>首先在命令行安装cli：
<code>dotnet tool install -g Volo.Abp.Cli</code>
如果安装过了，需要更新可以执行如下命令：
<code>dotnet tool update -g Volo.Abp.Cli</code></p> <h2 id="_2-使用cli创建项目"><a href="#_2-使用cli创建项目" class="header-anchor">#</a> 2. 使用cli创建项目</h2> <hr> <p>abp的提供了多样的项目类型：
Options</p> <ul><li>--template 或者 -t: 指定模板. 默认的模板是 app,会生成web项目.可用的模板有:
<ul><li>app (default): 应用程序模板. 其他选项:
<ul><li>--ui 或者 -u: 指定ui框架.默认mvc框架.其他选项:
<ul><li>mvc: ASP.NET Core MVC.此模板的其他选项:
<ul><li>--tiered: 创建分层解决方案,Web和Http Api层在物理上是分开的.如果未指定会创建一个分层的解决方案,此解决方案没有那么复杂,适合大多数场景.</li></ul></li> <li>angular: Angular. 这个模板还有一些额外的选项:
<ul><li>--separate-identity-server: 将Identity Server应用程序与API host应用程序分开. 如果未指定,则服务器端将只有一个端点.</li></ul></li> <li>none: 无UI. 这个模板还有一些额外的选项:
<ul><li>--separate-identity-server: 将Identity Server应用程序与API host应用程序分开. 如果未指定,则服务器端将只有一个端点.</li></ul></li></ul></li> <li>--mobile 或者 -m: 指定移动应用程序框架. 默认框架是 react-native. 其他选项:
<ul><li>none: 不包含移动应用程序.</li> <li>react-native: React Native.</li></ul></li> <li>--database-provider 或者 -d: 指定数据库提供程序.默认是 ef.其他选项:
<ul><li>ef: Entity Framework Core.</li> <li>mongodb: MongoDB.</li></ul></li></ul></li> <li>module: Module template. 其他选项:
<ul><li>--no-ui: 不包含UI.仅创建服务模块(也称为微服务 - 没有UI).</li></ul></li> <li>console: Console template.</li></ul></li> <li>--output-folder 或者 -o: 指定输出文件夹,默认是当前目录.</li> <li>--version 或者 -v: 指定ABP和模板的版本.它可以是 release tag 或者 branch name. 如果没有指定,则使用最新版本.大多数情况下,你会希望使用最新的版本.</li> <li>--template-source 或者 -ts: 指定自定义模板源用于生成项目,可以使用本地源和网络源(例如 D\localTemplate 或 https://<your url="">.zip).</your></li> <li>--create-solution-folder 或者 -csf: 指定项目是在输出文件夹中的新文件夹中还是直接在输出文件夹中.</li> <li>--connection-string 或者 -cs: 重写所有 appsettings.json 文件的默认连接字符串. 默认连接字符串是 Server=localhost;Database=MyProjectName;Trusted_Connection=True;MultipleActiveResultSets=true. 如果你不想使用默认,你可以设置自己的连接字符串. 默认的数据库提供程序是 SQL Server, 所以你只能输入SQL Server连接字符串!</li> <li>--local-framework-ref --abp-path: 使用对项目的本地引用,而不是替换为NuGet包引用.</li></ul> <p><strong>ABP提供了多样的的配置项用于创建不同类型的项目</strong>，为了尽量减少项目的依赖，便于理解，我们选择module模板并指定不包含UI。
执行如下命令，创建一个博客项目：
<code>abp new FlyLolo.Blog1 -t module --no-ui</code>
未指定 --output-folder的情况下，会在C:\Users\【用户名】下创建一个名为FlyLolo.Blog的文件夹。
#二、项目结构
##1.文件结构图
默认的文件结构如下图：
<img src="/blogimages/13407215/548134-20200803233001824-1516144326.png" alt="">
图中红框中的Docker、Git等相关文件暂时忽略，不影响对项目的理解。
在此目录的命令行执行“dotnet restore&quot;还原包。
##2.common.props
common.props文件是一个通用的项目设置文件。其内容默认如下：</p> <div class="language- extra-class"><pre class="language-text"><code>&lt;project&gt;
  &lt;propertygroup&gt;
    &lt;langversion&gt;latest&lt;/langversion&gt;
    &lt;version&gt;0.1.0&lt;/version&gt;
    &lt;nowarn&gt;$(NoWarn);CS1591&lt;/nowarn&gt;
	&lt;abpprojecttype&gt;module&lt;/abpprojecttype&gt;
  &lt;/propertygroup&gt;
  &lt;itemgroup&gt;
    &lt;packagereference include=&quot;SourceLink.Create.CommandLine&quot; version=&quot;2.8.3&quot; privateassets=&quot;All&quot;&gt;&lt;/packagereference&gt;
  &lt;/itemgroup&gt;
&lt;/project&gt;
</code></pre></div><p>随便在vs中右键点击一个项目选择【编辑项目文件】，例如“FlyLolo.Blog.Application”项目的项目文件内容如下：</p> <div class="language- extra-class"><pre class="language-text"><code>&lt;project sdk=&quot;Microsoft.NET.Sdk&quot;&gt;
  &lt;import project=&quot;..\..\common.props&quot;&gt;&lt;/import&gt;
  &lt;propertygroup&gt;
    &lt;targetframework&gt;netstandard2.0&lt;/targetframework&gt;
    &lt;rootnamespace&gt;FlyLolo.Blog&lt;/rootnamespace&gt;
  &lt;/propertygroup&gt;
  &lt;itemgroup&gt;
    &lt;packagereference include=&quot;Volo.Abp.AutoMapper&quot; version=&quot;3.0.5&quot;&gt;&lt;/packagereference&gt;
    &lt;packagereference include=&quot;Volo.Abp.Ddd.Application&quot; version=&quot;3.0.5&quot;&gt;&lt;/packagereference&gt;
    &lt;projectreference include=&quot;..\FlyLolo.Blog.Application.Contracts\FlyLolo.Blog.Application.Contracts.csproj&quot;&gt;&lt;/projectreference&gt;
    &lt;projectreference include=&quot;..\FlyLolo.Blog.Domain\FlyLolo.Blog.Domain.csproj&quot;&gt;&lt;/projectreference&gt;
  &lt;/itemgroup&gt;
&lt;/project&gt;
</code></pre></div><p>其中可见对common.props文件的引用，而且两个文件的内容格式非常相似。可以想到common.props文件是将解决方案中众多项目文件中的通用部分提取出来，就像多个HTML文件引用同一个Css一样。
例如需要在项目设置输出xml文件的时候，如果部分公共类未设置相应的注释，则会有警告出现，这样的情况一般在项目中设置CS1591取消警告，如下图
<img src="/blogimages/13407215/548134-20200804223823595-1918767752.png" alt="">
而在common.props文件中我们看到了CS1591的设置，这使所有引用了此common.props文件的项目都取消了警告显示。如果我们还会需要设置CSXXXX或者有其他多个项目都要修改的需求，只需要改common.props文件即可。
##3.解决方案介绍
解决方案如下图：
<img src="/blogimages/13407215/548134-20200806210646497-404403917.png" alt="">
可以看到所有项目分部在host、src、test三个文件夹。
host：主要是存放web/api项目。
src：存放应用层、基础设施层等。
test：存放测试项目。
------------host-----------------</p> <ul><li><strong>FlyLolo.Blog.Host.Shared</strong>
此项目比较简单，只有一个类，MultiTenancyConsts
<img src="https://img2020.cnblogs.com/blog/548134/202008/548134-20200806221109828-1632459948.png" alt=""></li></ul> <div class="language- extra-class"><pre class="language-text"><code>    public static class MultiTenancyConsts
    {
        /* Enable/disable multi-tenancy in a single point
         * to test your module with multi-tenancy.
         */
        public const bool IsEnabled = false;
    }
</code></pre></div><p>用于设置是否开启多租户功能。</p> <ul><li><strong>FlyLolo.Blog.HttpApi.Host</strong>
业务API项目，集成了swagger，是业务API的访问入口，但实际上大部分业务代码均不在此层，见下面项目介绍。</li> <li><strong>FlyLolo.Blog.IdentityServer</strong>
ABP集成了IdentityServer4，此项目就是利用IdentityServer4实现的认证服务。
-----------src--------------------</li> <li><strong>FlyLolo.Blog.HttpApi</strong>
Controller层，自己写的Controller放置在此层而不是host项目中。</li> <li><strong>FlyLolo.Blog.Application</strong>
Service的实现层，主要的业务代码大多在此，</li> <li><strong>FlyLolo.Blog.Application.Contracts</strong>
Contracts，合约、契约的意思，其中主要内容为DTO和众多的IServer接口。</li> <li><strong>FlyLolo.Blog.Domain</strong>
用于放置实体和仓储接口等。</li> <li><strong>FlyLolo.Blog.Domain.Shared</strong>
包含常量,枚举等类型，可以被所有层引用，所有不能包含业务逻辑等。</li> <li><strong>FlyLolo.Blog.EntityFrameworkCore</strong>
基础设施层，通过集成Entity Framework Core实现对数据库的访问。</li> <li><strong>FlyLolo.Blog.MongoDB</strong>
基础设施层，对MongoDB数据库的访问。</li> <li><strong>FlyLolo.Blog.HttpApi.Client</strong>
用于设置代理服务，通过ABP框架提供的动态代理HTTP C＃客户端的功能实现对其他服务的访问。
</li></ul></div> <footer class="page-edit"><!----> <!----></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.5c4124d9.js" defer></script><script src="/assets/js/2.5052fd89.js" defer></script><script src="/assets/js/18.1c3b6824.js" defer></script>
  </body>
</html>
